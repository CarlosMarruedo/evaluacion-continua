const { showColors } = require('../src/js/index.js');

// integration test
describe('showColors', () => {
  const twoColorImgUrl = '__test__/two-color.png';
  const multiColorImgUrl = '__test__/multicolor.png';
  const mosaicImgUrl = '__test__/mosaic-3394375_640.jpg';

   test('returns hsla color codes for a two-color image with color number n = 12', async () => {
    const expectedResult = [
      'hsla(0, 0%, 0%, 1)',
      'hsla(0, 0%, 100%, 1)'
    ];

    const colors = await showColors(twoColorImgUrl, 12);
    expect(colors).toEqual(expectedResult);
  });

  test('returns hsla color codes for a two-color image with color number n = 1', async () => {
    const expectedResult = [
      'hsla(0, 0%, 100%, 1)'
    ];

    const colors = await showColors(twoColorImgUrl, 1);
    expect(colors).toEqual(expectedResult);
  });

  test('returns hsla color codes for a multicolor image with color number n = 12', async () => {
    const expectedResult = [
      'hsla(0, 0%, 0%, 0)',
      'hsla(39, 77%, 83%, 1)',
      'hsla(186, 89%, 29%, 1)',
      'hsla(351, 100%, 86%, 1)',
      'hsla(180, 100%, 97%, 1)',
      'hsla(0, 0%, 0%, 1)',
      'hsla(0, 0%, 100%, 1)',
      'hsla(9, 100%, 64%, 1)'
    ];

    const colors = await showColors(multiColorImgUrl, 12);
    expect(colors).toEqual(expectedResult);
  });

  test('returns hsla color codes for a multicolor image with color number n = 5', async () => {
    const expectedResult = [
      'hsla(351, 100%, 86%, 1)',
      'hsla(180, 100%, 97%, 1)',
      'hsla(0, 0%, 0%, 1)',
      'hsla(0, 0%, 100%, 1)',
      'hsla(9, 100%, 64%, 1)'
    ];

    const colors = await showColors(multiColorImgUrl, 5);
    expect(colors).toEqual(expectedResult);
  }); 

   test('returns hsla color codes for a mosaic image with color number n = 12', async () => {
    const expectedResult = [
      'hsla(300, 18%, 3%, 1)',
      'hsla(149, 93%, 12%, 1)',
      'hsla(255, 29%, 3%, 1)',
      'hsla(111, 49%, 47%, 1)',
      'hsla(276, 29%, 3%, 1)',
      'hsla(178, 26%, 79%, 1)',
      'hsla(353, 100%, 39%, 1)',
      'hsla(30, 100%, 48%, 1)',
      'hsla(221, 26%, 19%, 1)',
      'hsla(66, 100%, 35%, 1)',
      'hsla(28, 100%, 47%, 1)',
      'hsla(190, 100%, 35%, 1)'
    ];

    const colors = await showColors(mosaicImgUrl, 12);
    expect(colors).toEqual(expectedResult);
  });

  test('returns hsla color codes for a mosaic image with color number n = 5', async () => {
    const expectedResult = [
      'hsla(30, 100%, 48%, 1)',
      'hsla(221, 26%, 19%, 1)',
      'hsla(66, 100%, 35%, 1)',
      'hsla(28, 100%, 47%, 1)',
      'hsla(190, 100%, 35%, 1)'
    ];

    const colors = await showColors(mosaicImgUrl, 5);
    expect(colors).toEqual(expectedResult);
  });
});
